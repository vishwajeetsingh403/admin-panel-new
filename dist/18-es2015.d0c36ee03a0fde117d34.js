(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{gfE1:function(e,t,i){"use strict";i.r(t),i.d(t,"ServicesModule",function(){return S});var a=i("s7LF"),n=i("SVse"),r=i("hrfs"),s=i("FE24"),o=i("aHM3"),l=i("YFAK"),c=i("6No5"),d=i("iInd"),b=i("AytR"),g=i("8Y7J"),h=i("IheW");let u=(()=>{class e{constructor(e){this.http=e,this.baseUrl=b.a.baseUrl}getServices(e){return this.http.get(this.baseUrl+"/v1/user/admin/services/list",{params:e})}}return e.\u0275fac=function(t){return new(t||e)(g.Vb(h.b))},e.\u0275prov=g.Hb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=i("VQPA"),f=i("vZxo"),m=i("Pffd"),v=i("LqlI"),y=i("5eHb");const P=["servicesGrid"];function C(e,t){if(1&e&&(g.Rb(0,"option"),g.xc(1),g.Qb()),2&e){const e=t.$implicit;g.zb(1),g.yc(e)}}function R(e,t){if(1&e&&(g.Rb(0,"option"),g.xc(1),g.Qb()),2&e){const e=t.$implicit;g.zb(1),g.yc(e)}}const w=[{path:"",component:(()=>{class e{constructor(e,t,i,n,r,s,o){this.serviceService=e,this.datePipe=t,this.modal=i,this.modalService=n,this.fb=r,this.toastr=s,this.propertyService=o,this.dateFilterParams={comparator:(e,t)=>{const i=this.datePipe.transform(t,"dd-MMM-yyyy"),a=new Date(i);return e.getTime()===a.getTime()?0:a<e?-1:a>e?1:void 0}},this.isLoading=!1,this.payload={entity:"SERVICE"},this.statusList=["DRAFT","IN_REVIEW","PUBLISHED","UNPUBLISHED","APPROVED","REJECTED"],this.activeStatusList=["true","false"],this.columnDefs=[{headerName:"Name",field:"name",pinned:"left"},{headerName:"Address",field:"address"},{headerName:"Active",field:"active"},{headerName:"Booking Count",field:"bookingCount"},{headerName:"Created At",field:"createdAt",filter:"agDateColumnFilter",cellRenderer:e=>this.datePipe.transform(e.value,"dd-MMM-yyyy"),filterParams:this.dateFilterParams},{headerName:"Description",field:"description"},{headerName:"Image Url",field:"imageUrl"},{headerName:"Property Count",field:"numberOfProperty"},{headerName:"Service Count",field:"numberOfServices"},{headerName:"Property Count",field:"numberOfProperty"},{headerName:"Weekly Earnings",field:"weeklyEarnings"},{headerName:"Published Status",field:"status"}],this.showToolPanel=!0,this.gridOptions={columnDefs:this.columnDefs,defaultColDef:{flex:1,minWidth:180,sortable:!0,filter:"agTextColumnFilter",floatingFilter:!0,resizable:!0}},this.filters=this.fb.group({status:new a.d(""),isActive:new a.d(""),propertyName:new a.d("")}),this.currentPager=1,this.itemsPerPage=20,this.totalItems=this.itemsPerPage+1}ngOnInit(){this.serviceService.getServices({page:this.currentPager-1,size:this.itemsPerPage}).subscribe(e=>{this.rowData=e.data})}ngAfterViewInit(){}pageChanged(e){this.serviceService.getServices({page:e.page-1,size:this.itemsPerPage}).subscribe(e=>{var t;this.rowData=e.data,(null===(t=this.rowData)||void 0===t?void 0:t.length)===this.itemsPerPage&&(this.totalItems=this.itemsPerPage*this.currentPager+1)},e=>{this.rowData=[]})}onRowClicked(e){this.bsModalRef=this.modalService.show(f.a),this.modal.modalContent=e,this.modal.statusType="service"}statusChanged(e){this.filters.get("status").patchValue(e.target.value)}activeStatusChanged(e){this.filters.get("isActive").patchValue(e.target.value)}handleSearch(){this.isLoading=!0,void 0!==this.filters.get("status").value&&(this.payload=Object.assign(Object.assign({},this.payload),{status:this.filters.get("status").value})),void 0!==this.filters.get("isActive").value&&(this.payload=Object.assign(Object.assign({},this.payload),{active:this.filters.get("isActive").value})),""!==this.filters.get("propertyName").value&&(this.payload=Object.assign(Object.assign({},this.payload),{search:this.filters.get("propertyName").value})),this.filters.dirty?this.propertyService.getFilteredData(this.payload).subscribe(e=>{this.rowData=e.data,this.isLoading=!1}):this.toastr.warning("Please select a filter to search")}Reset(){window.location.reload()}}return e.\u0275fac=function(t){return new(t||e)(g.Lb(u),g.Lb(n.e),g.Lb(p.a),g.Lb(v.b),g.Lb(a.c),g.Lb(y.b),g.Lb(m.a))},e.\u0275cmp=g.Fb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){if(1&e&&g.Bc(P,1),2&e){let e;g.mc(e=g.Zb())&&(t.grid=e.first)}},decls:43,vars:14,consts:[[1,"animated","fadeIn"],[1,"card"],[1,"card-body"],[1,"row"],[1,"col-sm-5"],[1,"card-title","mb-0"],[1,"small","text-muted","mt-10"],[1,"search-field"],[3,"formGroup","ngSubmit"],[1,"status"],["for","status",1,"label"],["name","status","formControlName","status",1,"select-box",3,"ngModel","change","ngModelChange"],[3,"value","disabled"],[4,"ngFor","ngForOf"],[1,"isActive"],["for","isActive",1,"label"],["name","isActive","formControlName","isActive",1,"select-box",3,"ngModel","change","ngModelChange"],[1,"propertyName"],["for","propertyName",1,"label"],["type","text","name","propertyName","formControlName","propertyName",1,"form-control"],[1,"btn-container"],["type","Submit","value","Search",1,"btn-primary","btn"],["type","button","value","Reset",1,"btn-primary","btn",3,"click"],[1,"col","pt-3","pb-3"],[1,"ag-theme-alpine",2,"width","100%","height","60vh",3,"rowData","gridOptions","rowClicked"],["servicesGrid",""],[1,"col-6"],[2,"float","right"],["pageBtnClass","btn",1,"pull-left",3,"totalItems","ngModel","itemsPerPage","ngModelChange","pageChanged"]],template:function(e,t){1&e&&(g.Rb(0,"div",0),g.Rb(1,"div",1),g.Rb(2,"div",2),g.Rb(3,"div",3),g.Rb(4,"div",4),g.Rb(5,"h4",5),g.xc(6,"Services"),g.Qb(),g.Mb(7,"div",6),g.Qb(),g.Qb(),g.Mb(8,"br"),g.Rb(9,"div",7),g.Rb(10,"form",8),g.Yb("ngSubmit",function(){return t.handleSearch()}),g.Rb(11,"div",9),g.Rb(12,"label",10),g.xc(13,"Select Status: "),g.Qb(),g.Mb(14,"br"),g.Rb(15,"select",11),g.Yb("change",function(e){return t.statusChanged(e)})("ngModelChange",function(e){return t.defaultOption=e}),g.Rb(16,"option",12),g.xc(17,"Select Status"),g.Qb(),g.vc(18,C,2,1,"option",13),g.Qb(),g.Qb(),g.Rb(19,"div",14),g.Rb(20,"label",15),g.xc(21,"Select Active: "),g.Qb(),g.Mb(22,"br"),g.Rb(23,"select",16),g.Yb("change",function(e){return t.activeStatusChanged(e)})("ngModelChange",function(e){return t.defaultOptionNew=e}),g.Rb(24,"option",12),g.xc(25,"Select Active"),g.Qb(),g.vc(26,R,2,1,"option",13),g.Qb(),g.Qb(),g.Rb(27,"div",17),g.Rb(28,"label",18),g.xc(29,"Enter Property Name: "),g.Qb(),g.Mb(30,"input",19),g.Qb(),g.Rb(31,"div",20),g.Mb(32,"input",21),g.Qb(),g.Rb(33,"div",20),g.Rb(34,"input",22),g.Yb("click",function(){return t.Reset()}),g.Qb(),g.Qb(),g.Qb(),g.Qb(),g.Rb(35,"div",23),g.Rb(36,"ag-grid-angular",24,25),g.Yb("rowClicked",function(e){return t.onRowClicked(e)}),g.Qb(),g.Qb(),g.Rb(38,"div",3),g.Mb(39,"div",26),g.Rb(40,"div",26),g.Rb(41,"div",27),g.Rb(42,"pager",28),g.Yb("ngModelChange",function(e){return t.currentPager=e})("pageChanged",function(e){return t.pageChanged(e)}),g.Qb(),g.Qb(),g.Qb(),g.Qb(),g.Qb(),g.Qb(),g.Qb()),2&e&&(g.zb(10),g.gc("formGroup",t.filters),g.zb(5),g.gc("ngModel",t.defaultOption),g.zb(1),g.gc("value",t.default)("disabled",!0),g.zb(2),g.gc("ngForOf",t.statusList),g.zb(5),g.gc("ngModel",t.defaultOptionNew),g.zb(1),g.gc("value",t.default)("disabled",!0),g.zb(2),g.gc("ngForOf",t.activeStatusList),g.zb(10),g.gc("rowData",t.rowData)("gridOptions",t.gridOptions),g.zb(6),g.gc("totalItems",t.totalItems)("ngModel",t.currentPager)("itemsPerPage",t.itemsPerPage))},directives:[a.t,a.k,a.g,a.r,a.j,a.e,a.n,a.u,n.k,a.b,l.a,c.a,a.m],styles:[".search-field[_ngcontent-%COMP%]    > form[_ngcontent-%COMP%] {\n        display: flex;\n        justify-content: space-evenly;\n      }\n      .btn[_ngcontent-%COMP%] {\n        outline: none;\n        border: none;\n      }\n      .select-box[_ngcontent-%COMP%] {\n        width: 12rem;\n        height: 35px;\n        border-radius: 4px;\n      }\n      .label[_ngcontent-%COMP%] {\n        font-weight: bold;\n      }\n      .btn-container[_ngcontent-%COMP%] {\n        margin-top: 1.8rem;\n      }\n      .spinner-border[_ngcontent-%COMP%] {\n        position: absolute;\n        top: 55%;\n        left: 50%;\n      }\n      .opacity[_ngcontent-%COMP%] {\n        opacity: 0.3;\n      }"]}),e})(),data:{title:"Services"}}];let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({imports:[[d.g.forChild(w)],d.g]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({providers:[n.e],imports:[[a.h,M,c.c,r.b,s.c,o.b.forRoot(),l.b.withComponents([]),n.c,a.p]]}),e})()}}]);